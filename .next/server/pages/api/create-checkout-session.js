"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/create-checkout-session";
exports.ids = ["pages/api/create-checkout-session"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "razorpay":
/*!***************************!*\
  !*** external "razorpay" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("razorpay");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-checkout-session&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-checkout-session.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-checkout-session&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-checkout-session.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_create_checkout_session_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/create-checkout-session.js */ \"(api)/./pages/api/create-checkout-session.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_create_checkout_session_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_create_checkout_session_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/create-checkout-session\",\n        pathname: \"/api/create-checkout-session\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_create_checkout_session_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNyZWF0ZS1jaGVja291dC1zZXNzaW9uJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZjcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbi5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNtRTtBQUNuRTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsa0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGtFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYnBhZ2UvP2ZlNDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbi5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NyZWF0ZS1jaGVja291dC1zZXNzaW9uXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY3JlYXRlLWNoZWNrb3V0LXNlc3Npb25cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-checkout-session&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-checkout-session.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/orderStorage.js":
/*!*****************************!*\
  !*** ./lib/orderStorage.js ***!
  \*****************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getOrderById: () => (/* binding */ getOrderById),\n/* harmony export */   getOrders: () => (/* binding */ getOrders),\n/* harmony export */   getOrdersByEmail: () => (/* binding */ getOrdersByEmail),\n/* harmony export */   saveOrder: () => (/* binding */ saveOrder),\n/* harmony export */   updateOrderStatus: () => (/* binding */ updateOrderStatus)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n\n\nconst ORDERS_FILE = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), \"data\", \"orders.json\");\n// Ensure data directory exists\nconst ensureDataDirectory = ()=>{\n    const dataDir = path__WEBPACK_IMPORTED_MODULE_1__.join(process.cwd(), \"data\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(dataDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.mkdirSync(dataDir, {\n            recursive: true\n        });\n    }\n};\n// Read all orders\nconst getOrders = ()=>{\n    ensureDataDirectory();\n    if (!fs__WEBPACK_IMPORTED_MODULE_0__.existsSync(ORDERS_FILE)) {\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(ORDERS_FILE, JSON.stringify([], null, 2));\n        return [];\n    }\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_0__.readFileSync(ORDERS_FILE, \"utf-8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error reading orders:\", error);\n        return [];\n    }\n};\n// Save a new order\nconst saveOrder = (orderData)=>{\n    ensureDataDirectory();\n    const orders = getOrders();\n    const newOrder = {\n        id: orderData.orderId || `ORD-${Date.now()}`,\n        paymentId: orderData.paymentId || \"pending\",\n        razorpayOrderId: orderData.razorpayOrderId || null,\n        amount: orderData.amount,\n        currency: orderData.currency || \"INR\",\n        status: orderData.status || \"pending\",\n        // Customer details\n        customer: {\n            name: orderData.name,\n            email: orderData.email,\n            contact: orderData.contact,\n            address: orderData.address\n        },\n        // Product details\n        product: {\n            productId: orderData.productId,\n            variantId: orderData.variantId,\n            productName: orderData.productName || \"Product\",\n            quantity: orderData.quantity\n        },\n        // Discount details\n        discount: {\n            couponCode: orderData.couponCode || null,\n            discountPercent: orderData.discount || 0,\n            discountAmount: orderData.discountAmount || 0,\n            originalAmount: orderData.originalAmount || orderData.amount\n        },\n        // Timestamps\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        // Additional notes\n        notes: orderData.notes || {}\n    };\n    orders.push(newOrder);\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(ORDERS_FILE, JSON.stringify(orders, null, 2));\n        return newOrder;\n    } catch (error) {\n        console.error(\"Error saving order:\", error);\n        throw new Error(\"Failed to save order\");\n    }\n};\n// Update order status (e.g., after payment confirmation)\nconst updateOrderStatus = (orderId, status, paymentId = null)=>{\n    const orders = getOrders();\n    const orderIndex = orders.findIndex((order)=>order.id === orderId);\n    if (orderIndex === -1) {\n        throw new Error(\"Order not found\");\n    }\n    orders[orderIndex].status = status;\n    orders[orderIndex].updatedAt = new Date().toISOString();\n    if (paymentId) {\n        orders[orderIndex].paymentId = paymentId;\n    }\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0__.writeFileSync(ORDERS_FILE, JSON.stringify(orders, null, 2));\n        return orders[orderIndex];\n    } catch (error) {\n        console.error(\"Error updating order:\", error);\n        throw new Error(\"Failed to update order\");\n    }\n};\n// Get order by ID\nconst getOrderById = (orderId)=>{\n    const orders = getOrders();\n    return orders.find((order)=>order.id === orderId);\n};\n// Get orders by email\nconst getOrdersByEmail = (email)=>{\n    const orders = getOrders();\n    return orders.filter((order)=>order.customer.email === email);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQyxHQUFHO1FBQ3JCLE1BQU0sSUFBSUYsTUFBTTtJQUNsQjtJQUVBL0IsTUFBTSxDQUFDaUMsV0FBVyxDQUFDdkIsTUFBTSxHQUFHQTtJQUM1QlYsTUFBTSxDQUFDaUMsV0FBVyxDQUFDTCxTQUFTLEdBQUcsSUFBSXhCLE9BQU91QixXQUFXO0lBRXJELElBQUlyQixXQUFXO1FBQ2JOLE1BQU0sQ0FBQ2lDLFdBQVcsQ0FBQzNCLFNBQVMsR0FBR0E7SUFDakM7SUFFQSxJQUFJO1FBQ0Y1Qiw2Q0FBZ0IsQ0FBQ0UsYUFBYVcsS0FBS0MsU0FBUyxDQUFDUSxRQUFRLE1BQU07UUFDM0QsT0FBT0EsTUFBTSxDQUFDaUMsV0FBVztJQUMzQixFQUFFLE9BQU9yQyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyx5QkFBeUJBO1FBQ3ZDLE1BQU0sSUFBSW1DLE1BQU07SUFDbEI7QUFDRixFQUFFO0FBRUYsa0JBQWtCO0FBQ1gsTUFBTUssZUFBZSxDQUFDakM7SUFDM0IsTUFBTUgsU0FBU1g7SUFDZixPQUFPVyxPQUFPcUMsSUFBSSxDQUFDRixDQUFBQSxRQUFTQSxNQUFNakMsRUFBRSxLQUFLQztBQUMzQyxFQUFFO0FBRUYsc0JBQXNCO0FBQ2YsTUFBTW1DLG1CQUFtQixDQUFDekI7SUFDL0IsTUFBTWIsU0FBU1g7SUFDZixPQUFPVyxPQUFPdUMsTUFBTSxDQUFDSixDQUFBQSxRQUFTQSxNQUFNeEIsUUFBUSxDQUFDRSxLQUFLLEtBQUtBO0FBQ3pELEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJwYWdlLy4vbGliL29yZGVyU3RvcmFnZS5qcz9hOWIzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgT1JERVJTX0ZJTEUgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnb3JkZXJzLmpzb24nKTtcblxuLy8gRW5zdXJlIGRhdGEgZGlyZWN0b3J5IGV4aXN0c1xuY29uc3QgZW5zdXJlRGF0YURpcmVjdG9yeSA9ICgpID0+IHtcbiAgY29uc3QgZGF0YURpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMoZGF0YURpcikpIHtcbiAgICBmcy5ta2RpclN5bmMoZGF0YURpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gIH1cbn07XG5cbi8vIFJlYWQgYWxsIG9yZGVyc1xuZXhwb3J0IGNvbnN0IGdldE9yZGVycyA9ICgpID0+IHtcbiAgZW5zdXJlRGF0YURpcmVjdG9yeSgpO1xuICBcbiAgaWYgKCFmcy5leGlzdHNTeW5jKE9SREVSU19GSUxFKSkge1xuICAgIGZzLndyaXRlRmlsZVN5bmMoT1JERVJTX0ZJTEUsIEpTT04uc3RyaW5naWZ5KFtdLCBudWxsLCAyKSk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoT1JERVJTX0ZJTEUsICd1dGYtOCcpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHJlYWRpbmcgb3JkZXJzOicsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn07XG5cbi8vIFNhdmUgYSBuZXcgb3JkZXJcbmV4cG9ydCBjb25zdCBzYXZlT3JkZXIgPSAob3JkZXJEYXRhKSA9PiB7XG4gIGVuc3VyZURhdGFEaXJlY3RvcnkoKTtcbiAgXG4gIGNvbnN0IG9yZGVycyA9IGdldE9yZGVycygpO1xuICBjb25zdCBuZXdPcmRlciA9IHtcbiAgICBpZDogb3JkZXJEYXRhLm9yZGVySWQgfHwgYE9SRC0ke0RhdGUubm93KCl9YCxcbiAgICBwYXltZW50SWQ6IG9yZGVyRGF0YS5wYXltZW50SWQgfHwgJ3BlbmRpbmcnLFxuICAgIHJhem9ycGF5T3JkZXJJZDogb3JkZXJEYXRhLnJhem9ycGF5T3JkZXJJZCB8fCBudWxsLFxuICAgIGFtb3VudDogb3JkZXJEYXRhLmFtb3VudCxcbiAgICBjdXJyZW5jeTogb3JkZXJEYXRhLmN1cnJlbmN5IHx8ICdJTlInLFxuICAgIHN0YXR1czogb3JkZXJEYXRhLnN0YXR1cyB8fCAncGVuZGluZycsXG4gICAgXG4gICAgLy8gQ3VzdG9tZXIgZGV0YWlsc1xuICAgIGN1c3RvbWVyOiB7XG4gICAgICBuYW1lOiBvcmRlckRhdGEubmFtZSxcbiAgICAgIGVtYWlsOiBvcmRlckRhdGEuZW1haWwsXG4gICAgICBjb250YWN0OiBvcmRlckRhdGEuY29udGFjdCxcbiAgICAgIGFkZHJlc3M6IG9yZGVyRGF0YS5hZGRyZXNzLFxuICAgIH0sXG4gICAgXG4gICAgLy8gUHJvZHVjdCBkZXRhaWxzXG4gICAgcHJvZHVjdDoge1xuICAgICAgcHJvZHVjdElkOiBvcmRlckRhdGEucHJvZHVjdElkLFxuICAgICAgdmFyaWFudElkOiBvcmRlckRhdGEudmFyaWFudElkLFxuICAgICAgcHJvZHVjdE5hbWU6IG9yZGVyRGF0YS5wcm9kdWN0TmFtZSB8fCAnUHJvZHVjdCcsXG4gICAgICBxdWFudGl0eTogb3JkZXJEYXRhLnF1YW50aXR5LFxuICAgIH0sXG4gICAgXG4gICAgLy8gRGlzY291bnQgZGV0YWlsc1xuICAgIGRpc2NvdW50OiB7XG4gICAgICBjb3Vwb25Db2RlOiBvcmRlckRhdGEuY291cG9uQ29kZSB8fCBudWxsLFxuICAgICAgZGlzY291bnRQZXJjZW50OiBvcmRlckRhdGEuZGlzY291bnQgfHwgMCxcbiAgICAgIGRpc2NvdW50QW1vdW50OiBvcmRlckRhdGEuZGlzY291bnRBbW91bnQgfHwgMCxcbiAgICAgIG9yaWdpbmFsQW1vdW50OiBvcmRlckRhdGEub3JpZ2luYWxBbW91bnQgfHwgb3JkZXJEYXRhLmFtb3VudCxcbiAgICB9LFxuICAgIFxuICAgIC8vIFRpbWVzdGFtcHNcbiAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBcbiAgICAvLyBBZGRpdGlvbmFsIG5vdGVzXG4gICAgbm90ZXM6IG9yZGVyRGF0YS5ub3RlcyB8fCB7fSxcbiAgfTtcbiAgXG4gIG9yZGVycy5wdXNoKG5ld09yZGVyKTtcbiAgXG4gIHRyeSB7XG4gICAgZnMud3JpdGVGaWxlU3luYyhPUkRFUlNfRklMRSwgSlNPTi5zdHJpbmdpZnkob3JkZXJzLCBudWxsLCAyKSk7XG4gICAgcmV0dXJuIG5ld09yZGVyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBvcmRlcjonLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2F2ZSBvcmRlcicpO1xuICB9XG59O1xuXG4vLyBVcGRhdGUgb3JkZXIgc3RhdHVzIChlLmcuLCBhZnRlciBwYXltZW50IGNvbmZpcm1hdGlvbilcbmV4cG9ydCBjb25zdCB1cGRhdGVPcmRlclN0YXR1cyA9IChvcmRlcklkLCBzdGF0dXMsIHBheW1lbnRJZCA9IG51bGwpID0+IHtcbiAgY29uc3Qgb3JkZXJzID0gZ2V0T3JkZXJzKCk7XG4gIGNvbnN0IG9yZGVySW5kZXggPSBvcmRlcnMuZmluZEluZGV4KG9yZGVyID0+IG9yZGVyLmlkID09PSBvcmRlcklkKTtcbiAgXG4gIGlmIChvcmRlckluZGV4ID09PSAtMSkge1xuICAgIHRocm93IG5ldyBFcnJvcignT3JkZXIgbm90IGZvdW5kJyk7XG4gIH1cbiAgXG4gIG9yZGVyc1tvcmRlckluZGV4XS5zdGF0dXMgPSBzdGF0dXM7XG4gIG9yZGVyc1tvcmRlckluZGV4XS51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIFxuICBpZiAocGF5bWVudElkKSB7XG4gICAgb3JkZXJzW29yZGVySW5kZXhdLnBheW1lbnRJZCA9IHBheW1lbnRJZDtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy53cml0ZUZpbGVTeW5jKE9SREVSU19GSUxFLCBKU09OLnN0cmluZ2lmeShvcmRlcnMsIG51bGwsIDIpKTtcbiAgICByZXR1cm4gb3JkZXJzW29yZGVySW5kZXhdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIG9yZGVyOicsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUgb3JkZXInKTtcbiAgfVxufTtcblxuLy8gR2V0IG9yZGVyIGJ5IElEXG5leHBvcnQgY29uc3QgZ2V0T3JkZXJCeUlkID0gKG9yZGVySWQpID0+IHtcbiAgY29uc3Qgb3JkZXJzID0gZ2V0T3JkZXJzKCk7XG4gIHJldHVybiBvcmRlcnMuZmluZChvcmRlciA9PiBvcmRlci5pZCA9PT0gb3JkZXJJZCk7XG59O1xuXG4vLyBHZXQgb3JkZXJzIGJ5IGVtYWlsXG5leHBvcnQgY29uc3QgZ2V0T3JkZXJzQnlFbWFpbCA9IChlbWFpbCkgPT4ge1xuICBjb25zdCBvcmRlcnMgPSBnZXRPcmRlcnMoKTtcbiAgcmV0dXJuIG9yZGVycy5maWx0ZXIob3JkZXIgPT4gb3JkZXIuY3VzdG9tZXIuZW1haWwgPT09IGVtYWlsKTtcbn07XG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiT1JERVJTX0ZJTEUiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImVuc3VyZURhdGFEaXJlY3RvcnkiLCJkYXRhRGlyIiwiZXhpc3RzU3luYyIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsImdldE9yZGVycyIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInJlYWRGaWxlU3luYyIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwic2F2ZU9yZGVyIiwib3JkZXJEYXRhIiwib3JkZXJzIiwibmV3T3JkZXIiLCJpZCIsIm9yZGVySWQiLCJEYXRlIiwibm93IiwicGF5bWVudElkIiwicmF6b3JwYXlPcmRlcklkIiwiYW1vdW50IiwiY3VycmVuY3kiLCJzdGF0dXMiLCJjdXN0b21lciIsIm5hbWUiLCJlbWFpbCIsImNvbnRhY3QiLCJhZGRyZXNzIiwicHJvZHVjdCIsInByb2R1Y3RJZCIsInZhcmlhbnRJZCIsInByb2R1Y3ROYW1lIiwicXVhbnRpdHkiLCJkaXNjb3VudCIsImNvdXBvbkNvZGUiLCJkaXNjb3VudFBlcmNlbnQiLCJkaXNjb3VudEFtb3VudCIsIm9yaWdpbmFsQW1vdW50IiwiY3JlYXRlZEF0IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkQXQiLCJub3RlcyIsInB1c2giLCJFcnJvciIsInVwZGF0ZU9yZGVyU3RhdHVzIiwib3JkZXJJbmRleCIsImZpbmRJbmRleCIsIm9yZGVyIiwiZ2V0T3JkZXJCeUlkIiwiZmluZCIsImdldE9yZGVyc0J5RW1haWwiLCJmaWx0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/orderStorage.js\n");

/***/ }),

/***/ "(api)/./pages/api/create-checkout-session.js":
/*!**********************************************!*\
  !*** ./pages/api/create-checkout-session.js ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var razorpay__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! razorpay */ \"razorpay\");\n/* harmony import */ var _lib_orderStorage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/orderStorage */ \"(api)/./lib/orderStorage.js\");\n// API Route: /api/create-checkout-session\n\n\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { productId, variantId, quantity, amount, name, email, contact, address, couponCode, discount } = req.body;\n        console.log(\"\\uD83D\\uDD39 Received:\", req.body);\n        if (!productId || !variantId || !quantity || !amount) {\n            return res.status(400).json({\n                error: \"Missing required fields\",\n                received: {\n                    productId,\n                    variantId,\n                    quantity,\n                    amount\n                }\n            });\n        }\n        // Environment check\n        if (!process.env.RAZORPAY_KEY_ID || !process.env.RAZORPAY_KEY_SECRET) {\n            return res.status(500).json({\n                error: \"Razorpay keys missing on server\"\n            });\n        }\n        if (!process.env.NEXT_PUBLIC_SITE_URL) {\n            return res.status(500).json({\n                error: \"NEXT_PUBLIC_SITE_URL missing\"\n            });\n        }\n        // Generate order ID\n        const orderId = `ORD-${Date.now()}`;\n        // Calculate discount amount\n        const discountPercent = discount || 0;\n        let originalAmount, discountAmount;\n        if (couponCode === \"TESTADI\") {\n            // TESTADI makes final price ₹1\n            originalAmount = amount > 1 ? amount : 2499; // If amount is already ₹1, use a default original price\n            discountAmount = originalAmount - 1;\n        } else {\n            originalAmount = discountPercent > 0 ? Math.round(amount / (1 - discountPercent / 100)) : amount;\n            discountAmount = originalAmount - amount;\n        }\n        // Save order to database BEFORE creating payment link\n        try {\n            const savedOrder = (0,_lib_orderStorage__WEBPACK_IMPORTED_MODULE_1__.saveOrder)({\n                orderId,\n                amount,\n                originalAmount,\n                discountAmount,\n                name,\n                email,\n                contact,\n                address,\n                productId,\n                variantId,\n                productName: `Product ${productId}`,\n                quantity,\n                couponCode,\n                discount: discountPercent,\n                status: \"pending\",\n                notes: {\n                    variantId,\n                    address: address || \"Not provided\"\n                }\n            });\n            console.log(\"✅ Order saved:\", savedOrder.id);\n        } catch (saveError) {\n            console.error(\"❌ Failed to save order:\", saveError);\n        // Continue anyway - don't block payment\n        }\n        const razorpay = new razorpay__WEBPACK_IMPORTED_MODULE_0__({\n            key_id: process.env.RAZORPAY_KEY_ID,\n            key_secret: process.env.RAZORPAY_KEY_SECRET\n        });\n        // Amount must be number\n        const amountPaise = Number(amount) * 100;\n        if (isNaN(amountPaise)) {\n            return res.status(400).json({\n                error: \"Amount is invalid\",\n                receivedAmount: amount\n            });\n        }\n        const paymentLink = await razorpay.paymentLink.create({\n            amount: amountPaise,\n            currency: \"INR\",\n            description: `Order for ${productId} (Variant: ${variantId}) - Qty: ${quantity}`,\n            customer: {\n                name: name || \"Customer\",\n                email: email || \"customer@example.com\",\n                contact: contact || \"9999999999\"\n            },\n            notify: {\n                sms: true,\n                email: true\n            },\n            reminder_enable: true,\n            callback_url: `${process.env.NEXT_PUBLIC_SITE_URL}/payment-success?orderId=${orderId}&amount=${amount}&productName=Varaha Jewels Product&quantity=${quantity}&email=${email}&name=${name}`,\n            callback_method: \"get\",\n            notes: {\n                productId,\n                variantId,\n                quantity,\n                address: address || \"Not provided\",\n                couponCode: couponCode || \"None\",\n                discount: discount || 0\n            }\n        });\n        return res.status(200).json({\n            success: true,\n            checkoutUrl: paymentLink.short_url,\n            sessionId: paymentLink.id,\n            orderId: orderId\n        });\n    } catch (error) {\n        console.error(\"❌ Checkout error:\", error);\n        return res.status(500).json({\n            error: \"Failed to create Razorpay checkout session\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY3JlYXRlLWNoZWNrb3V0LXNlc3Npb24uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsMENBQTBDO0FBQ1Y7QUFDbUI7QUFFcEMsZUFBZUUsUUFBUUMsR0FBRyxFQUFFQyxHQUFHO0lBQzVDLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUFxQjtJQUM1RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQUVDLFFBQVEsRUFBRSxHQUFHZixJQUFJZ0IsSUFBSTtRQUVoSEMsUUFBUUMsR0FBRyxDQUFDLDBCQUFnQmxCLElBQUlnQixJQUFJO1FBRXBDLElBQUksQ0FBQ1YsYUFBYSxDQUFDQyxhQUFhLENBQUNDLFlBQVksQ0FBQ0MsUUFBUTtZQUNwRCxPQUFPUixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUMxQkMsT0FBTztnQkFDUGMsVUFBVTtvQkFBRWI7b0JBQVdDO29CQUFXQztvQkFBVUM7Z0JBQU87WUFDckQ7UUFDRjtRQUVBLG9CQUFvQjtRQUNwQixJQUFJLENBQUNXLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFJLENBQUNGLFFBQVFDLEdBQUcsQ0FBQ0UsbUJBQW1CLEVBQUU7WUFDcEUsT0FBT3RCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO1lBQ1Q7UUFDRjtRQUVBLElBQUksQ0FBQ2UsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0IsRUFBRTtZQUNyQyxPQUFPdkIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDMUJDLE9BQU87WUFDVDtRQUNGO1FBRUEsb0JBQW9CO1FBQ3BCLE1B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Oi8vd2VicGFnZS8uL3BhZ2VzL2FwaS9jcmVhdGUtY2hlY2tvdXQtc2Vzc2lvbi5qcz9mMTI4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFQSSBSb3V0ZTogL2FwaS9jcmVhdGUtY2hlY2tvdXQtc2Vzc2lvblxuaW1wb3J0IFJhem9ycGF5IGZyb20gXCJyYXpvcnBheVwiO1xuaW1wb3J0IHsgc2F2ZU9yZGVyIH0gZnJvbSBcIi4uLy4uL2xpYi9vcmRlclN0b3JhZ2VcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gXCJQT1NUXCIpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogXCJNZXRob2Qgbm90IGFsbG93ZWRcIiB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBwcm9kdWN0SWQsIHZhcmlhbnRJZCwgcXVhbnRpdHksIGFtb3VudCwgbmFtZSwgZW1haWwsIGNvbnRhY3QsIGFkZHJlc3MsIGNvdXBvbkNvZGUsIGRpc2NvdW50IH0gPSByZXEuYm9keTtcblxuICAgIGNvbnNvbGUubG9nKFwi8J+UuSBSZWNlaXZlZDpcIiwgcmVxLmJvZHkpO1xuXG4gICAgaWYgKCFwcm9kdWN0SWQgfHwgIXZhcmlhbnRJZCB8fCAhcXVhbnRpdHkgfHwgIWFtb3VudCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiTWlzc2luZyByZXF1aXJlZCBmaWVsZHNcIixcbiAgICAgICAgcmVjZWl2ZWQ6IHsgcHJvZHVjdElkLCB2YXJpYW50SWQsIHF1YW50aXR5LCBhbW91bnQgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRW52aXJvbm1lbnQgY2hlY2tcbiAgICBpZiAoIXByb2Nlc3MuZW52LlJBWk9SUEFZX0tFWV9JRCB8fCAhcHJvY2Vzcy5lbnYuUkFaT1JQQVlfS0VZX1NFQ1JFVCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiUmF6b3JwYXkga2V5cyBtaXNzaW5nIG9uIHNlcnZlclwiXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVVJMKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oe1xuICAgICAgICBlcnJvcjogXCJORVhUX1BVQkxJQ19TSVRFX1VSTCBtaXNzaW5nXCJcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIG9yZGVyIElEXG4gICAgY29uc3Qgb3JkZXJJZCA9IGBPUkQtJHtEYXRlLm5vdygpfWA7XG4gICAgXG4gICAgLy8gQ2FsY3VsYXRlIGRpc2NvdW50IGFtb3VudFxuICAgIGNvbnN0IGRpc2NvdW50UGVyY2VudCA9IGRpc2NvdW50IHx8IDA7XG4gICAgbGV0IG9yaWdpbmFsQW1vdW50LCBkaXNjb3VudEFtb3VudDtcbiAgICBcbiAgICBpZiAoY291cG9uQ29kZSA9PT0gJ1RFU1RBREknKSB7XG4gICAgICAvLyBURVNUQURJIG1ha2VzIGZpbmFsIHByaWNlIOKCuTFcbiAgICAgIG9yaWdpbmFsQW1vdW50ID0gYW1vdW50ID4gMSA/IGFtb3VudCA6IDI0OTk7IC8vIElmIGFtb3VudCBpcyBhbHJlYWR5IOKCuTEsIHVzZSBhIGRlZmF1bHQgb3JpZ2luYWwgcHJpY2VcbiAgICAgIGRpc2NvdW50QW1vdW50ID0gb3JpZ2luYWxBbW91bnQgLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbEFtb3VudCA9IGRpc2NvdW50UGVyY2VudCA+IDAgPyBNYXRoLnJvdW5kKGFtb3VudCAvICgxIC0gZGlzY291bnRQZXJjZW50IC8gMTAwKSkgOiBhbW91bnQ7XG4gICAgICBkaXNjb3VudEFtb3VudCA9IG9yaWdpbmFsQW1vdW50IC0gYW1vdW50O1xuICAgIH1cblxuICAgIC8vIFNhdmUgb3JkZXIgdG8gZGF0YWJhc2UgQkVGT1JFIGNyZWF0aW5nIHBheW1lbnQgbGlua1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzYXZlZE9yZGVyID0gc2F2ZU9yZGVyKHtcbiAgICAgICAgb3JkZXJJZCxcbiAgICAgICAgYW1vdW50LFxuICAgICAgICBvcmlnaW5hbEFtb3VudCxcbiAgICAgICAgZGlzY291bnRBbW91bnQsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGVtYWlsLFxuICAgICAgICBjb250YWN0LFxuICAgICAgICBhZGRyZXNzLFxuICAgICAgICBwcm9kdWN0SWQsXG4gICAgICAgIHZhcmlhbnRJZCxcbiAgICAgICAgcHJvZHVjdE5hbWU6IGBQcm9kdWN0ICR7cHJvZHVjdElkfWAsXG4gICAgICAgIHF1YW50aXR5LFxuICAgICAgICBjb3Vwb25Db2RlLFxuICAgICAgICBkaXNjb3VudDogZGlzY291bnRQZXJjZW50LFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgbm90ZXM6IHtcbiAgICAgICAgICB2YXJpYW50SWQsXG4gICAgICAgICAgYWRkcmVzczogYWRkcmVzcyB8fCBcIk5vdCBwcm92aWRlZFwiLFxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coXCLinIUgT3JkZXIgc2F2ZWQ6XCIsIHNhdmVkT3JkZXIuaWQpO1xuICAgIH0gY2F0Y2ggKHNhdmVFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBGYWlsZWQgdG8gc2F2ZSBvcmRlcjpcIiwgc2F2ZUVycm9yKTtcbiAgICAgIC8vIENvbnRpbnVlIGFueXdheSAtIGRvbid0IGJsb2NrIHBheW1lbnRcbiAgICB9XG5cbiAgICBjb25zdCByYXpvcnBheSA9IG5ldyBSYXpvcnBheSh7XG4gICAgICBrZXlfaWQ6IHByb2Nlc3MuZW52LlJBWk9SUEFZX0tFWV9JRCxcbiAgICAgIGtleV9zZWNyZXQ6IHByb2Nlc3MuZW52LlJBWk9SUEFZX0tFWV9TRUNSRVQsXG4gICAgfSk7XG5cbiAgICAvLyBBbW91bnQgbXVzdCBiZSBudW1iZXJcbiAgICBjb25zdCBhbW91bnRQYWlzZSA9IE51bWJlcihhbW91bnQpICogMTAwO1xuXG4gICAgaWYgKGlzTmFOKGFtb3VudFBhaXNlKSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtcbiAgICAgICAgZXJyb3I6IFwiQW1vdW50IGlzIGludmFsaWRcIixcbiAgICAgICAgcmVjZWl2ZWRBbW91bnQ6IGFtb3VudFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcGF5bWVudExpbmsgPSBhd2FpdCByYXpvcnBheS5wYXltZW50TGluay5jcmVhdGUoe1xuICAgICAgYW1vdW50OiBhbW91bnRQYWlzZSxcbiAgICAgIGN1cnJlbmN5OiBcIklOUlwiLFxuICAgICAgZGVzY3JpcHRpb246IGBPcmRlciBmb3IgJHtwcm9kdWN0SWR9IChWYXJpYW50OiAke3ZhcmlhbnRJZH0pIC0gUXR5OiAke3F1YW50aXR5fWAsXG4gICAgICBjdXN0b21lcjoge1xuICAgICAgICBuYW1lOiBuYW1lIHx8IFwiQ3VzdG9tZXJcIixcbiAgICAgICAgZW1haWw6IGVtYWlsIHx8IFwiY3VzdG9tZXJAZXhhbXBsZS5jb21cIixcbiAgICAgICAgY29udGFjdDogY29udGFjdCB8fCBcIjk5OTk5OTk5OTlcIixcbiAgICAgIH0sXG4gICAgICBub3RpZnk6IHtcbiAgICAgICAgc21zOiB0cnVlLFxuICAgICAgICBlbWFpbDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICByZW1pbmRlcl9lbmFibGU6IHRydWUsXG4gICAgICBjYWxsYmFja191cmw6IGAke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NJVEVfVVJMfS9wYXltZW50LXN1Y2Nlc3M/b3JkZXJJZD0ke29yZGVySWR9JmFtb3VudD0ke2Ftb3VudH0mcHJvZHVjdE5hbWU9VmFyYWhhIEpld2VscyBQcm9kdWN0JnF1YW50aXR5PSR7cXVhbnRpdHl9JmVtYWlsPSR7ZW1haWx9Jm5hbWU9JHtuYW1lfWAsXG4gICAgICBjYWxsYmFja19tZXRob2Q6IFwiZ2V0XCIsXG4gICAgICBub3Rlczoge1xuICAgICAgICBwcm9kdWN0SWQsXG4gICAgICAgIHZhcmlhbnRJZCxcbiAgICAgICAgcXVhbnRpdHksXG4gICAgICAgIGFkZHJlc3M6IGFkZHJlc3MgfHwgXCJOb3QgcHJvdmlkZWRcIixcbiAgICAgICAgY291cG9uQ29kZTogY291cG9uQ29kZSB8fCBcIk5vbmVcIixcbiAgICAgICAgZGlzY291bnQ6IGRpc2NvdW50IHx8IDAsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBjaGVja291dFVybDogcGF5bWVudExpbmsuc2hvcnRfdXJsLFxuICAgICAgc2Vzc2lvbklkOiBwYXltZW50TGluay5pZCxcbiAgICAgIG9yZGVySWQ6IG9yZGVySWQsIC8vIEluY2x1ZGUgb3JkZXIgSUQgZm9yIHRlc3QgbW9kZVxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBDaGVja291dCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7XG4gICAgICBlcnJvcjogXCJGYWlsZWQgdG8gY3JlYXRlIFJhem9ycGF5IGNoZWNrb3V0IHNlc3Npb25cIixcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2VcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlJhem9ycGF5Iiwic2F2ZU9yZGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInByb2R1Y3RJZCIsInZhcmlhbnRJZCIsInF1YW50aXR5IiwiYW1vdW50IiwibmFtZSIsImVtYWlsIiwiY29udGFjdCIsImFkZHJlc3MiLCJjb3Vwb25Db2RlIiwiZGlzY291bnQiLCJib2R5IiwiY29uc29sZSIsImxvZyIsInJlY2VpdmVkIiwicHJvY2VzcyIsImVudiIsIlJBWk9SUEFZX0tFWV9JRCIsIlJBWk9SUEFZX0tFWV9TRUNSRVQiLCJORVhUX1BVQkxJQ19TSVRFX1VSTCIsIm9yZGVySWQiLCJEYXRlIiwibm93IiwiZGlzY291bnRQZXJjZW50Iiwib3JpZ2luYWxBbW91bnQiLCJkaXNjb3VudEFtb3VudCIsIk1hdGgiLCJyb3VuZCIsInNhdmVkT3JkZXIiLCJwcm9kdWN0TmFtZSIsIm5vdGVzIiwiaWQiLCJzYXZlRXJyb3IiLCJyYXpvcnBheSIsImtleV9pZCIsImtleV9zZWNyZXQiLCJhbW91bnRQYWlzZSIsIk51bWJlciIsImlzTmFOIiwicmVjZWl2ZWRBbW91bnQiLCJwYXltZW50TGluayIsImNyZWF0ZSIsImN1cnJlbmN5IiwiZGVzY3JpcHRpb24iLCJjdXN0b21lciIsIm5vdGlmeSIsInNtcyIsInJlbWluZGVyX2VuYWJsZSIsImNhbGxiYWNrX3VybCIsImNhbGxiYWNrX21ldGhvZCIsInN1Y2Nlc3MiLCJjaGVja291dFVybCIsInNob3J0X3VybCIsInNlc3Npb25JZCIsImRldGFpbHMiLCJtZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/create-checkout-session.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcreate-checkout-session&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcreate-checkout-session.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();